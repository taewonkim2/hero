<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸ˆìœµìƒí’ˆ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #1a73e8;
            --primary-dark: #1557b0;
            --bg-left: #f8f9fa;
            --bg-right: #ffffff;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --text-muted: #9ca3af;
            --border: #e5e7eb;
            --header-bg: #2d3a8c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .sub-item.disabled {
            color: #ccc;  /* ë˜ëŠ” var(--text-muted) */
            cursor: default;
            pointer-events: none;  /* í´ë¦­ ë¹„í™œì„±í™” */
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-right);
            color: var(--text-primary);
            line-height: 1.5;
            max-width: 480px;
            margin: 0 auto;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* ìƒë‹¨ í—¤ë” */
        .top-header {
            background: var(--header-bg);
            color: white;
            padding: 16px 20px;
            font-size: 18px;
            font-weight: 600;
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .main-container {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        /* ì™¼ìª½ ë©”ë‰´ */
        .left-menu {
            width: 110px;
            background: var(--bg-left);
            border-right: 1px solid var(--border);
            overflow-y: auto;
            flex-shrink: 0;
        }

        .left-menu::-webkit-scrollbar {
            width: 0;
        }

        .menu-item {
            padding: 16px 12px;
            font-size: 14px;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 1px solid var(--border);
            transition: all 0.2s;
        }

        .menu-item:hover {
            background: #eef2ff;
            color: var(--primary);
        }

        .menu-item.active {
            background: white;
            color: var(--primary);
            font-weight: 600;
            border-left: 3px solid var(--primary);
            padding-left: 9px;
        }

        /* ì˜¤ë¥¸ìª½ ì»¨í…ì¸  */
        .right-content {
            flex: 1;
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        .right-content::-webkit-scrollbar {
            width: 4px;
        }

        .right-content::-webkit-scrollbar-thumb {
            background: #ddd;
            border-radius: 2px;
        }

        /* ì„¹ì…˜ */
        .section {
            padding: 0 16px;
        }

        .section-header {
            position: sticky;
            top: 0;
            background: white;
            padding: 14px 0;
            font-size: 15px;
            font-weight: bold;
            color: var(--text-muted);
            border-bottom: 3px solid var(--border);
            color: #000000;                          /* black */
            border-bottom: 1px solid #000000;        /* black */
            z-index: 10;
        }

        .section-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
        }

        .sub-item {
            padding: 14px 8px;
            font-size: 14px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .sub-item:hover {
            color: var(--primary);
            background: #f8faff;
        }

        /* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */
        .bottom-nav {
            display: flex;
            border-top: 1px solid var(--border);
            background: white;
            padding: 8px 0;
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 4px;
            font-size: 11px;
            color: var(--text-muted);
            cursor: pointer;
        }

        .nav-item:hover {
            color: var(--primary);
        }

        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .nav-item.has-badge .nav-icon {
            position: relative;
        }

        .badge {
            position: absolute;
            top: -4px;
            right: -8px;
            background: #ef4444;
            color: white;
            font-size: 10px;
            padding: 1px 5px;
            border-radius: 10px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <!-- ìƒë‹¨ í—¤ë” -->
    <header class="top-header">ê¸ˆìœµìƒí’ˆ</header>

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="main-container">
        <!-- ì™¼ìª½ ë©”ë‰´ (CSVì—ì„œ ë™ì  ìƒì„±) -->
        <nav class="left-menu" id="leftMenu">
            <!-- CSV ë¡œë“œ í›„ ë™ì  ìƒì„± -->
        </nav>

        <!-- ì˜¤ë¥¸ìª½ ì»¨í…ì¸  (CSVì—ì„œ ë™ì  ìƒì„±) -->
        <div class="right-content" id="rightContent">
            <!-- CSV ë¡œë“œ í›„ ë™ì  ìƒì„± -->
        </div>
    </div>

    <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="bottom-nav">
        <div class="nav-item">
            <span class="nav-icon">ğŸ </span>
            <span>MY</span>
        </div>
        <div class="nav-item has-badge">
            <span class="nav-icon">ğŸ””<span class="badge">77</span></span>
            <span>ì•Œë¦¼ì„¼í„°</span>
        </div>
        <div class="nav-item">
            <span class="nav-icon">ğŸ“‹</span>
            <span>ì¸ì¦/ë³´ì•ˆ</span>
        </div>
        <div class="nav-item">
            <span class="nav-icon">ğŸ§</span>
            <span>ê³ ê°ì„¼í„°</span>
        </div>
        <div class="nav-item">
            <span class="nav-icon">ğŸ‘¤</span>
            <span>ë¡œê·¸ì•„ì›ƒ</span>
        </div>
    </nav>

    <script>
        // CSV íŒŒì¼ ë¡œë“œ ë° ë©”ë‰´ ìƒì„±
        async function loadMenuFromCSV() {
            try {
                const response = await fetch('./menutree.csv');
                const csvText = await response.text();
                const menuData = parseCSV(csvText);
                buildMenu(menuData);
                initMenuEvents();
            } catch (error) {
                console.error('CSV ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        // CSV íŒŒì‹±
        function parseCSV(csvText) {
            const lines = csvText.trim().split('\n');
            const data = [];

            lines.forEach(line => {
                if (!line.trim()) return;

                // BOM ì œê±°
                line = line.replace(/^\uFEFF/, '');

                const cols = line.split(',');
                if (cols.length >= 5) {
                    data.push({
                        category: cols[0].trim(),      // Aì—´: ëŒ€ë¶„ë¥˜
                        subMenu: cols[1].trim(),       // Bì—´: ì¤‘ë¶„ë¥˜ (index.htmlì—ì„œ ë¯¸ì‚¬ìš©)
                        itemName: cols[2].trim(),      // Cì—´: ë©”ë‰´ëª…
                        filePath: cols[3].trim(),      // Dì—´: íŒŒì¼ê²½ë¡œ
                        isActive: cols[4].trim() === 'O'  // Eì—´: í™œì„±í™” ì—¬ë¶€
                    });
                }
            });

            return data;
        }

        // ì ˆëŒ€ê²½ë¡œë¥¼ ìƒëŒ€ê²½ë¡œë¡œ ë³€í™˜
        function toRelativePath(absolutePath) {
            if (!absolutePath) return '';
            // C:\Users\bichn\Downloads\hero\ ì´í›„ ê²½ë¡œë§Œ ì¶”ì¶œ
            const match = absolutePath.match(/hero[\\\/](.+)$/i);
            if (match) {
                return './' + match[1].replace(/\\/g, '/');
            }
            return absolutePath;
        }

        // ì¹´í…Œê³ ë¦¬ëª…ì„ IDë¡œ ë³€í™˜
        function categoryToId(category) {
            const idMap = {
                'ìì‚°ê´€ë¦¬': 'asset',
                'ì˜¤ëŠ˜ì˜ ê¸ˆìœµìƒí’ˆ': 'today',
                'ì¢…ëª©í¬ì»¤ìŠ¤': 'focus',
                'í€ë“œ': 'fund',
                'RP': 'rp',
                'ELS/ELB': 'els',
                'êµ­ë‚´ì±„ê¶Œ': 'domestic-bond',
                'í•´ì™¸ì±„ê¶Œ': 'foreign-bond',
                'ISA': 'isa',
                'WRAP': 'wrap',
                'íˆ¬ììë¬¸': 'advisory'
            };
            return idMap[category] || category.toLowerCase().replace(/\s+/g, '-');
        }

        // ë©”ë‰´ ìƒì„±
        function buildMenu(data) {
            const leftMenu = document.getElementById('leftMenu');
            const rightContent = document.getElementById('rightContent');

            // ì¹´í…Œê³ ë¦¬ë³„ë¡œ ê·¸ë£¹í™”
            const categories = {};
            data.forEach(item => {
                if (!categories[item.category]) {
                    categories[item.category] = [];
                }
                categories[item.category].push(item);
            });

            // ì™¼ìª½ ë©”ë‰´ ìƒì„±
            let isFirst = true;
            Object.keys(categories).forEach(category => {
                const menuItem = document.createElement('div');
                menuItem.className = 'menu-item' + (isFirst ? ' active' : '');
                menuItem.setAttribute('data-target', categoryToId(category));

                // "ì˜¤ëŠ˜ì˜ ê¸ˆìœµìƒí’ˆ"ì€ ì¤„ë°”ê¿ˆ ì²˜ë¦¬
                if (category === 'ì˜¤ëŠ˜ì˜ ê¸ˆìœµìƒí’ˆ') {
                    menuItem.innerHTML = 'ì˜¤ëŠ˜ì˜ <br> ê¸ˆìœµìƒí’ˆ';
                } else {
                    menuItem.textContent = category;
                }

                leftMenu.appendChild(menuItem);
                isFirst = false;
            });

            // ì˜¤ë¥¸ìª½ ì»¨í…ì¸  ìƒì„±
            Object.keys(categories).forEach(category => {
                const section = document.createElement('div');
                section.className = 'section';
                section.id = categoryToId(category);

                const header = document.createElement('div');
                header.className = 'section-header';
                header.textContent = category;
                section.appendChild(header);

                const content = document.createElement('div');
                content.className = 'section-content';

                categories[category].forEach(item => {
                    const subItem = document.createElement('div');
                    subItem.className = 'sub-item';
                    subItem.textContent = item.itemName;

                    if (item.isActive && item.filePath) {
                        const relativePath = toRelativePath(item.filePath);
                        subItem.onclick = () => location.href = relativePath;
                    } else {
                        subItem.classList.add('disabled');
                    }

                    content.appendChild(subItem);
                });

                section.appendChild(content);
                rightContent.appendChild(section);
            });

            // í•˜ë‹¨ ì—¬ë°± ì¶”ê°€
            const spacer = document.createElement('div');
            spacer.style.height = '100px';
            rightContent.appendChild(spacer);
        }

        // ë©”ë‰´ ì´ë²¤íŠ¸ ì´ˆê¸°í™”
        function initMenuEvents() {
            const menuItems = document.querySelectorAll('.menu-item');
            const rightContent = document.getElementById('rightContent');

            // ì™¼ìª½ ë©”ë‰´ í´ë¦­ ì‹œ ì˜¤ë¥¸ìª½ ìŠ¤í¬ë¡¤
            menuItems.forEach(item => {
                item.addEventListener('click', function() {
                    menuItems.forEach(m => m.classList.remove('active'));
                    this.classList.add('active');

                    const targetId = this.getAttribute('data-target');
                    const targetSection = document.getElementById(targetId);

                    if (targetSection) {
                        targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });

            // ìŠ¤í¬ë¡¤ ì‹œ ì™¼ìª½ ë©”ë‰´ active ìƒíƒœ ë³€ê²½
            rightContent.addEventListener('scroll', function() {
                const sections = document.querySelectorAll('.section');
                let currentSection = '';

                sections.forEach(section => {
                    const sectionTop = section.offsetTop - rightContent.offsetTop;

                    if (rightContent.scrollTop >= sectionTop - 50) {
                        currentSection = section.getAttribute('id');
                    }
                });

                menuItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('data-target') === currentSection) {
                        item.classList.add('active');
                    }
                });
            });
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ CSV ë¡œë“œ
        document.addEventListener('DOMContentLoaded', loadMenuFromCSV);
    </script>
</body>
</html>
